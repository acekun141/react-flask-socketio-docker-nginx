{"ast":null,"code":"var _jsxFileName = \"/home/ace/Documents/Project/privatechat/src/pages/HomePage.js\";\nimport React, { useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport { get_facebook_friend, get_next_friend, get_room } from '../actions/homePage';\nimport { get_favorites, add_favorite, remove_favorite } from '../redux/reducer/favorites/actions';\nimport { useSelector, useDispatch } from 'react-redux';\nimport Loading from '../components/Loading';\nimport { FiSettings, FiMessageCircle, FiHeart, FiFacebook, FiUserMinus, FiUserPlus, FiUser } from 'react-icons/fi';\nexport default function HomePage() {\n  const [show, setShow] = useState('favorites');\n  const history = useHistory();\n\n  const handleClick = name => {\n    setShow(name);\n  };\n\n  const enterRoom = async user_id => {\n    const room = await get_room(user_id);\n\n    if (room) {\n      history.push(`/direct/${room.room}`);\n    } else {\n      alert('Room don\\'t exists');\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module-homepage\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 33,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: `favorite ${show === 'favorites' ? 'active' : null}`,\n    onClick: () => handleClick('favorites'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 35,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiHeart, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 21\n    }\n  }, \"Favorite\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: `facebook ${show === 'facebook' ? 'active' : null}`,\n    onClick: () => handleClick('facebook'),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 41,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(FiFacebook, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 44,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 21\n    }\n  }, \"Facebook\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"module-content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, show === 'favorites' ? /*#__PURE__*/React.createElement(Favorites, {\n    message: enterRoom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 23\n    }\n  }) : null, show === 'facebook' ? /*#__PURE__*/React.createElement(Facebook, {\n    message: enterRoom,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 23\n    }\n  }) : null));\n}\n;\nexport const Favorites = props => {\n  const favorites = useSelector(state => state.favorites);\n  const dispatch = useDispatch();\n  const [isFetch, setIsFetch] = useState(false);\n  const [search, setSearch] = useState('');\n  useEffect(() => {\n    setIsFetch(true);\n    dispatch(get_favorites());\n    setIsFetch(false);\n  }, []);\n\n  const handleClick = user_id => {\n    dispatch(remove_favorite(user_id));\n  };\n\n  const handleChange = e => {\n    setSearch(e.target.value);\n  };\n\n  return isFetch ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 11\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }, favorites.length ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"favorites-header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Find your friend\",\n    value: search,\n    onChange: e => handleChange(e),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 25\n    }\n  })) : /*#__PURE__*/React.createElement(NoneResult, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 19\n    }\n  }), favorites.filter(favorite => favorite.name.includes(search)).map(favorite => /*#__PURE__*/React.createElement(\"div\", {\n    key: favorite.userID,\n    className: \"friend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"friend-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    url: favorite.avatar,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"friend-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 25\n    }\n  }, favorite.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"group-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"message\",\n    onClick: () => props.message(favorite.userID),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FiMessageCircle, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 33\n    }\n  }, \"Message\")), /*#__PURE__*/React.createElement(\"button\", {\n    className: \"unfavorite\",\n    onClick: () => handleClick(favorite.userID),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FiUserMinus, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 33\n    }\n  }, \"Unfavorite\")))))));\n};\nexport const Facebook = props => {\n  const token = useSelector(state => state.token);\n  const dispatch = useDispatch();\n  const [friends, setFriends] = useState([]);\n  const [isFetch, setIsFetch] = useState(true);\n  const [next, setNext] = useState('');\n  const [favoritesID, setFavoriteID] = useState([]);\n  const favorites = useSelector(state => state.favorites);\n  useEffect(() => {\n    favorites.map(favorite => {\n      setFavoriteID([...favoritesID, favorite.userID]);\n    });\n  }, [favorites]);\n  useEffect(() => {\n    const async_function = async () => {\n      const data = await get_facebook_friend(token);\n      setFriends(data.friends.data);\n      setNext(data.friends.paging.next);\n      setIsFetch(false);\n    };\n\n    if (token) {\n      async_function();\n    }\n  }, [token]);\n\n  const handleNext = async () => {\n    if (next) {\n      setIsFetch(true);\n      const data = await get_next_friend(next);\n\n      if (data.data) {\n        setFriends([...friends, ...data.data]);\n        setNext(data.paging.next);\n      }\n\n      setIsFetch(false);\n    }\n  };\n\n  const handleClick = (event, friend) => {\n    const format = {\n      name: friend.name,\n      id: friend.id,\n      avatar: friend.picture.data.url\n    };\n    dispatch(add_favorite(format));\n    event.currentTarget.style.display = 'none';\n  };\n\n  const checkId = user_id => {\n    const result = favoritesID.filter(id => {\n      if (`${id}` === `${user_id}`) {\n        return true;\n      }\n    });\n\n    if (result.length) {\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  return isFetch ? /*#__PURE__*/React.createElement(Loading, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 12\n    }\n  }) : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"facebook\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 9\n    }\n  }, friends ? null : /*#__PURE__*/React.createElement(NoneResult, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }), friends.map(friend => /*#__PURE__*/React.createElement(\"div\", {\n    key: friend.id,\n    className: \"friend\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"friend-avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    url: friend.picture.data.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"friend-name\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 25\n    }\n  }, friend.name), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"group-button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"message\",\n    onClick: () => props.message(friend.id),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(FiMessageCircle, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 33\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 33\n    }\n  }, \"Message\")), checkId(friend.id) ? null : /*#__PURE__*/React.createElement(\"button\", {\n    className: \"favorite\",\n    onClick: e => handleClick(e, friend),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(FiUserPlus, {\n    size: 20,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 41\n    }\n  }, \"Favorite\")))))), next ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"facebook-footer\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    className: \"more\",\n    onClick: () => handleNext(),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 25\n    }\n  }, \"More\")) : null);\n};\n\nconst NoneResult = () => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"none-result\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 13\n    }\n  }, \"You don't have anything here\"));\n};\n\nexport const Avatar = props => {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"avatar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    src: props.url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 13\n    }\n  }));\n};","map":{"version":3,"sources":["/home/ace/Documents/Project/privatechat/src/pages/HomePage.js"],"names":["React","useEffect","useState","useHistory","get_facebook_friend","get_next_friend","get_room","get_favorites","add_favorite","remove_favorite","useSelector","useDispatch","Loading","FiSettings","FiMessageCircle","FiHeart","FiFacebook","FiUserMinus","FiUserPlus","FiUser","HomePage","show","setShow","history","handleClick","name","enterRoom","user_id","room","push","alert","Favorites","props","favorites","state","dispatch","isFetch","setIsFetch","search","setSearch","handleChange","e","target","value","length","filter","favorite","includes","map","userID","avatar","message","Facebook","token","friends","setFriends","next","setNext","favoritesID","setFavoriteID","async_function","data","paging","handleNext","event","friend","format","id","picture","url","currentTarget","style","display","checkId","result","NoneResult","Avatar"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\nimport {useHistory} from 'react-router-dom';\nimport {get_facebook_friend, get_next_friend, get_room} from '../actions/homePage';\nimport {\n    get_favorites,\n    add_favorite,\n    remove_favorite\n} from '../redux/reducer/favorites/actions';\nimport {useSelector, useDispatch} from 'react-redux';\nimport Loading from '../components/Loading';\nimport {\n    FiSettings, FiMessageCircle,\n    FiHeart, FiFacebook,\n    FiUserMinus, FiUserPlus,\n    FiUser\n} from 'react-icons/fi';\n\nexport default function HomePage() {\n    const [show, setShow] = useState('favorites');\n    const history = useHistory();\n    const handleClick = (name) => {\n        setShow(name);\n    }\n    const enterRoom = async (user_id) => {\n        const room = await get_room(user_id);\n        if (room) {\n            history.push(`/direct/${room.room}`);\n        } else {\n            alert('Room don\\'t exists');\n        }\n    }\n    return (\n        <div className='module-homepage'>\n            <div className='module-header'>\n                <button className={`favorite ${show === 'favorites' ? 'active' : null}`}\n                        onClick={() => handleClick('favorites')}\n                >\n                    <FiHeart size={20}/>\n                    <p>Favorite</p>\n                </button>\n                <button className={`facebook ${show === 'facebook' ? 'active' : null}`}\n                        onClick={() => handleClick('facebook')}\n                >\n                    <FiFacebook size={20}/>\n                    <p>Facebook</p>\n                </button>\n            </div>\n            <div className='module-content'>\n                {show === 'favorites'\n                    ? <Favorites message={enterRoom} /> \n                    : null\n                }\n                {show === 'facebook'\n                    ? <Facebook message={enterRoom} /> \n                    : null\n                }\n            </div>\n        </div>\n    );\n};\n\nexport const Favorites = (props) => {\n    const favorites = useSelector(state => state.favorites)\n    const dispatch = useDispatch();\n    const [isFetch, setIsFetch] = useState(false);\n    const [search, setSearch] = useState('');\n    useEffect(() => {\n        setIsFetch(true)\n        dispatch(get_favorites());\n        setIsFetch(false)\n    }, []);\n    const handleClick = (user_id) => {\n        dispatch(remove_favorite(user_id));\n    }\n    const handleChange = (e) => {\n        setSearch(e.target.value);\n    }\n    return (\n        isFetch\n        ? <Loading />\n        :\n        <div className='favorites'>\n            {favorites.length\n                ? (\n                    <div className='favorites-header'>\n                        <input type='text'\n                               placeholder='Find your friend'\n                               value={search}\n                               onChange={(e) => handleChange(e)}\n                        />\n                    </div>\n                )\n                : <NoneResult />\n            }\n            {favorites\n            .filter(favorite => favorite.name.includes(search))\n            .map(favorite => (\n                <div key={favorite.userID} className='friend'>\n                    <div className='friend-avatar'>\n                        <Avatar url={favorite.avatar}/>\n                    </div>\n                    <div className='friend-name'>\n                        <p>{favorite.name}</p>\n                        <div className='group-button'>\n                            <button className='message'\n                                    onClick={() => props.message(favorite.userID)}\n                            >\n                                <FiMessageCircle size={20} />\n                                <p>Message</p>\n                            </button>\n                            <button className='unfavorite'\n                                    onClick={() => handleClick(favorite.userID)}\n                            >\n                                <FiUserMinus size={20} />\n                                <p>Unfavorite</p>\n                            </button>\n                        </div>\n                    </div>\n                </div>\n            ))}\n        </div>\n    );\n}\n\nexport const Facebook = (props) => {\n    const token = useSelector(state => state.token);\n    const dispatch = useDispatch();\n    const [friends, setFriends] = useState([]); \n    const [isFetch, setIsFetch] = useState(true);\n    const [next, setNext] = useState('');\n    const [favoritesID, setFavoriteID] = useState([])\n    const favorites = useSelector(state => state.favorites);\n    useEffect(() => {\n        favorites.map(favorite => {\n            setFavoriteID([...favoritesID, favorite.userID])\n        })\n    }, [favorites])\n    useEffect(() => {\n        const async_function = async () => {\n            const data = await get_facebook_friend(token);\n            setFriends(data.friends.data);\n            setNext(data.friends.paging.next);\n            setIsFetch(false);\n        }\n        if (token) {\n            async_function();\n        }\n    }, [token])\n    const handleNext = async () => {\n        if (next) {\n            setIsFetch(true);\n            const data = await get_next_friend(next);\n            if (data.data) {\n                setFriends([...friends, ...data.data]);\n                setNext(data.paging.next);\n            }\n            setIsFetch(false);\n        }\n    }\n    const handleClick = (event, friend) => {\n        const format = {\n            name: friend.name,\n            id: friend.id,\n            avatar: friend.picture.data.url\n        }\n        dispatch(add_favorite(format));\n        event.currentTarget.style.display = 'none';\n    }\n    const checkId = (user_id) => {\n        const result = favoritesID.filter(id => {\n            if (`${id}` === `${user_id}`) {\n                return true;\n            }\n        });\n        if (result.length) {\n            return true;\n        } else {\n            return false;\n        }\n    }\n    return (\n        isFetch \n        ? (<Loading />)\n        :\n        <div className='facebook'>\n            {friends\n                ? null\n                : <NoneResult/>\n            }\n            {friends.map((friend) => (\n                <div key={friend.id} className='friend'>\n                    <div className='friend-avatar'>\n                        <Avatar url={friend.picture.data.url}/>\n                    </div>\n                    <div className='friend-name'>\n                        <p>{friend.name}</p>\n                        <div className='group-button'>\n                            <button className='message'\n                                    onClick={() => props.message(friend.id)}\n                            >\n                                <FiMessageCircle size={20} />\n                                <p>Message</p>\n                            </button>\n                            {checkId(friend.id)\n                                ? null\n                                : (\n                                    <button className='favorite'\n                                            onClick={(e) => handleClick(e,friend)}\n                                    >\n                                        <FiUserPlus size={20} />\n                                        <p>Favorite</p>\n                                    </button>\n                                )\n                            }\n                        </div>\n                    </div>\n                </div>\n            ))}\n            {next\n                ? (\n                    <div className='facebook-footer'>\n                        <button className='more' onClick={() => handleNext()}>More</button>\n                    </div>\n                )\n                : null\n            } \n        </div>\n    );\n}\n\nconst NoneResult = () => {\n    return (\n        <div className='none-result'>\n            <p>You don't have anything here</p>\n        </div>\n    )\n}\n\nexport const Avatar = (props) => {\n    return (\n        <div className='avatar'>\n            <img src={props.url} />\n        </div>\n    );\n};"]},"metadata":{},"sourceType":"module"}