{"ast":null,"code":"import { GET_TOKEN } from './actionTypes';\nimport { LOGOUT } from '../user/actionTypes';\nexport const get_token = () => async dispatch => {\n  try {\n    const response = await fetch('/auth/token', {\n      method: 'GET',\n      headers: {\n        'x-access-token': localStorage.getItem('token')\n      }\n    });\n    const data = await response.json();\n\n    if (data.access_token) {\n      return dispatch({\n        type: GET_TOKEN,\n        payload: data.access_token\n      });\n    } else {\n      throw 'Error';\n    }\n  } catch (error) {\n    alert('Something wrong! Sorry about that!');\n    return dispatch({\n      type: LOGOUT\n    });\n  }\n};","map":{"version":3,"sources":["/home/ace/Documents/Project/privatechat/src/redux/reducer/accessToken/actions.js"],"names":["GET_TOKEN","LOGOUT","get_token","dispatch","response","fetch","method","headers","localStorage","getItem","data","json","access_token","type","payload","error","alert"],"mappings":"AAAA,SAAQA,SAAR,QAAwB,eAAxB;AACA,SAAQC,MAAR,QAAqB,qBAArB;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAM,MAAOC,QAAP,IAAoB;AAC/C,MAAI;AACA,UAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,aAAD,EACxB;AACIC,MAAAA,MAAM,EAAE,KADZ;AAEIC,MAAAA,OAAO,EAAE;AACL,0BAAkBC,YAAY,CAACC,OAAb,CAAqB,OAArB;AADb;AAFb,KADwB,CAA5B;AAQA,UAAMC,IAAI,GAAG,MAAMN,QAAQ,CAACO,IAAT,EAAnB;;AACA,QAAID,IAAI,CAACE,YAAT,EAAuB;AACnB,aAAOT,QAAQ,CAAC;AACZU,QAAAA,IAAI,EAAEb,SADM;AAEZc,QAAAA,OAAO,EAAEJ,IAAI,CAACE;AAFF,OAAD,CAAf;AAIH,KALD,MAKO;AACH,YAAM,OAAN;AACH;AACJ,GAlBD,CAkBE,OAAMG,KAAN,EAAa;AACXC,IAAAA,KAAK,CAAC,oCAAD,CAAL;AACA,WAAOb,QAAQ,CAAC;AACZU,MAAAA,IAAI,EAAEZ;AADM,KAAD,CAAf;AAGH;AACJ,CAzBM","sourcesContent":["import {GET_TOKEN} from './actionTypes';\nimport {LOGOUT} from '../user/actionTypes';\n\nexport const get_token = () => async (dispatch) => {\n    try {\n        const response = await fetch('/auth/token',\n            {\n                method: 'GET',\n                headers: {\n                    'x-access-token': localStorage.getItem('token')\n                }\n            }\n        );\n        const data = await response.json();\n        if (data.access_token) {\n            return dispatch({\n                type: GET_TOKEN,\n                payload: data.access_token\n            });\n        } else {\n            throw('Error')\n        }\n    } catch(error) {\n        alert('Something wrong! Sorry about that!');\n        return dispatch({\n            type: LOGOUT \n        });\n    }\n};"]},"metadata":{},"sourceType":"module"}